(this["webpackJsonpreact-base"]=this["webpackJsonpreact-base"]||[]).push([[0],{112:function(e,t,a){e.exports=a(278)},120:function(e,t,a){},252:function(e,t,a){},254:function(e,t,a){},278:function(e,t,a){"use strict";a.r(t);a(113),a(114);var n=a(0),r=a.n(n),c=a(106),o=a.n(c),s=(a(120),a(1)),l=a(19),u=a(11),i=(a(252),a(20)),m=a.n(i),d=a(37),p=(a(254),a(62)),b=Object(n.createContext)(),f=Object(n.createContext)(),h=function(e){var t=e.children,a=Object(n.useState)([]),c=Object(p.a)(a,2),o=c[0],s=c[1],l=Object(n.useState)(null),u=Object(p.a)(l,2),i=u[0],m=u[1];return r.a.createElement(b.Provider,{value:{user:i,routes:o}},r.a.createElement(f.Provider,{value:{setUser:m,setRoutes:s}},t))},v=a(38),g=a(39),E=a(111),k=a(110),j=a(108),O=a.n(j),w=function(){return r.a.createElement("div",null,"Dashboard Works!")},y=function(){return r.a.createElement("div",null,"Form Works!")},x=function(){return r.a.createElement("div",null,"Profile Works!")},N=function(e){Object(E.a)(a,e);var t=Object(k.a)(a);function a(){return Object(v.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"getMenu",value:function(){return[{path:"/home",name:"Dashboard",component:w,link:!0},{path:"/form",name:"Form",component:y,link:!0},{path:"/profile",name:"Profile",component:x,link:!0}]}}]),a}(function(){function e(){var t=this;Object(v.a)(this,e),this.handleError=function(e){switch(e.response.status){case 401:t.redirectTo(document,"/");break;case 404:t.redirectTo(document,"/404");break;default:t.redirectTo(document,"/500")}return Promise.reject(e)},this.redirectTo=function(e,t){e.location=t};var a=O.a.create({});a.interceptors.response.use(this.handleSuccess,this.handleError),this.service=a}return Object(g.a)(e,[{key:"handleSuccess",value:function(e){return e}},{key:"get",value:function(e,t){return this.service.get(e).then((function(e){return t(e.status,e.data)}))}},{key:"patch",value:function(e,t,a){return this.service.request({method:"PATCH",url:e,responseType:"json",data:t}).then((function(e){return a(e.status,e.data)}))}},{key:"post",value:function(e,t,a){return this.service.request({method:"POST",url:e,responseType:"json",data:t}).then((function(e){return a(e.status,e.data)}))}}]),e}()),C=r.a.memo((function(){var e=new N,t=Object(n.useContext)(b).routes,a=Object(n.useContext)(f).setRoutes;return console.log("here"),Object(n.useEffect)((function(){(function(){var t=Object(d.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMenu();case 2:n=t.sent,a(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()(),console.log("service call")}),[]),r.a.createElement("div",{className:"bg-light border-right",id:"sidebar-wrapper"},r.a.createElement("div",{className:"sidebar-heading"},"React Base"),r.a.createElement("div",{className:"list-group list-group-flush"},t.map((function(e,t){return e.link&&r.a.createElement(l.Link,{key:t,to:e.path,className:"list-group-item list-group-item-action bg-light"},e.name)}))))})),S=function(){var e=Object(u.useOktaAuth)().authService,t=Object(n.useContext)(b).user;return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light border-bottom"},r.a.createElement("button",{className:"btn btn-primary",id:"menu-toggle",onClick:function(){return document.getElementById("wrapper").classList.toggle("toggled")}},"Sidebar"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav ml-auto mt-2 mt-lg-0"},r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Hi ",t.given_name,"!"),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"navbarDropdown"},r.a.createElement("a",{className:"dropdown-item",href:"#",onClick:function(){e.logout("/")}},"Logout"))))))},T=function(){var e=Object(n.useContext)(b).routes;return r.a.createElement("div",{className:"container"},r.a.createElement(s.g,null,e.map((function(e,t){return r.a.createElement(s.d,{key:t,path:e.path,name:e.name,component:e.component})})),r.a.createElement(s.c,{from:"/react-base",to:"/home"})))},P=function(){var e=Object(u.useOktaAuth)(),t=e.authState,a=e.authService,c=Object(n.useContext)(b).user,o=Object(n.useContext)(f).setUser;return Object(n.useEffect)((function(){(function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getUser();case 2:t=e.sent,o(t),console.log("Auth",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,a]),c?r.a.createElement("div",{className:"d-flex",id:"wrapper"},r.a.createElement(C,null),r.a.createElement("div",{id:"view-wrapper"},r.a.createElement(S,null),r.a.createElement(T,null))):r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))},R={clientId:"0oan5whnnp1mRfl534x6",issuer:"https://dev-812844.okta.com/oauth2/default",redirectUri:"https://bklim14.github.io/react-base/callback",scopes:["openid","profile","email"],pkce:!0},U=a(109),A=(a(277),function(){return Object(n.useEffect)((function(){var e=R,t=e.pkce,a=e.issuer,n=e.clientId,r=e.redirectUri,c=e.scopes;new U({baseUrl:a.split("/oauth2")[0],clientId:n,redirectUri:r,authParams:{pkce:t,issuer:a,display:"page",responseMode:t?"query":"fragment",scopes:c}}).renderEl({el:"#sign-in-widget"},(function(){}),(function(e){throw e}))}),[]),r.a.createElement("div",null,r.a.createElement("div",{id:"sign-in-widget"}))}),I=function(){var e=Object(s.k)();return r.a.createElement(u.Security,Object.assign({},R,{onAuthRequired:function(){e.push("/login")}}),r.a.createElement(s.g,null,r.a.createElement(s.d,{path:"/login",component:A}),r.a.createElement(s.d,{path:"/callback",component:u.LoginCallback}),r.a.createElement(h,null,r.a.createElement(u.SecureRoute,{path:"/",component:P}))))},L=function(){return r.a.createElement(l.BrowserRouter,{basename:"/react-base"},r.a.createElement(I,null))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root"))}},[[112,1,2]]]);
//# sourceMappingURL=main.75658efc.chunk.js.map