(this["webpackJsonpreact-base"]=this["webpackJsonpreact-base"]||[]).push([[0],{112:function(e,t,n){e.exports=n(278)},120:function(e,t,n){},252:function(e,t,n){},254:function(e,t,n){},278:function(e,t,n){"use strict";n.r(t);n(113),n(114);var a=n(0),r=n.n(a),c=n(106),o=n.n(c),s=(n(120),n(1)),l=n(19),u=n(11),i=(n(252),n(20)),m=n.n(i),d=n(37),p=(n(254),n(62)),b=Object(a.createContext)(),f=Object(a.createContext)(),h=function(e){var t=e.children,n=Object(a.useState)([]),c=Object(p.a)(n,2),o=c[0],s=c[1],l=Object(a.useState)(null),u=Object(p.a)(l,2),i=u[0],m=u[1];return r.a.createElement(b.Provider,{value:{user:i,routes:o}},r.a.createElement(f.Provider,{value:{setUser:m,setRoutes:s}},t))},v=n(38),g=n(39),E=n(111),k=n(110),j=n(108),O=n.n(j),w=function(){return r.a.createElement("div",null,"Dashboard Works!")},y=function(){return r.a.createElement("div",null,"Form Works!")},x=function(){return r.a.createElement("div",null,"Profile Works!")},N=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"getMenu",value:function(){return[{path:"/home",name:"Dashboard",component:w,link:!0},{path:"/form",name:"Form",component:y,link:!0},{path:"/profile",name:"Profile",component:x,link:!0}]}}]),n}(function(){function e(){var t=this;Object(v.a)(this,e),this.handleError=function(e){switch(e.response.status){case 401:t.redirectTo(document,"/");break;case 404:t.redirectTo(document,"/404");break;default:t.redirectTo(document,"/500")}return Promise.reject(e)},this.redirectTo=function(e,t){e.location=t};var n=O.a.create({});n.interceptors.response.use(this.handleSuccess,this.handleError),this.service=n}return Object(g.a)(e,[{key:"handleSuccess",value:function(e){return e}},{key:"get",value:function(e,t){return this.service.get(e).then((function(e){return t(e.status,e.data)}))}},{key:"patch",value:function(e,t,n){return this.service.request({method:"PATCH",url:e,responseType:"json",data:t}).then((function(e){return n(e.status,e.data)}))}},{key:"post",value:function(e,t,n){return this.service.request({method:"POST",url:e,responseType:"json",data:t}).then((function(e){return n(e.status,e.data)}))}}]),e}()),C=r.a.memo((function(){var e=new N,t=Object(a.useContext)(b).routes,n=Object(a.useContext)(f).setRoutes;return console.log("here"),Object(a.useEffect)((function(){(function(){var t=Object(d.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMenu();case 2:a=t.sent,n(a);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()(),console.log("service call")}),[]),r.a.createElement("div",{className:"bg-light border-right",id:"sidebar-wrapper"},r.a.createElement("div",{className:"sidebar-heading"},"React Base"),r.a.createElement("div",{className:"list-group list-group-flush"},t.map((function(e,t){return e.link&&r.a.createElement(l.Link,{key:t,to:e.path,className:"list-group-item list-group-item-action bg-light"},e.name)}))))})),S=function(){var e=Object(u.useOktaAuth)().authService,t=Object(a.useContext)(b).user;return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light border-bottom"},r.a.createElement("button",{className:"btn btn-primary",id:"menu-toggle",onClick:function(){return document.getElementById("wrapper").classList.toggle("toggled")}},"Sidebar"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav ml-auto mt-2 mt-lg-0"},r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Hi ",t.given_name,"!"),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"navbarDropdown"},r.a.createElement("a",{className:"dropdown-item",href:"#",onClick:function(){e.logout("/login")}},"Logout"))))))},T=function(){var e=Object(a.useContext)(b).routes;return r.a.createElement("div",{className:"container"},r.a.createElement(s.g,null,e.map((function(e,t){return r.a.createElement(s.d,{key:t,path:e.path,name:e.name,component:e.component})})),r.a.createElement(s.c,{from:"/react-base",to:"/home"})))},P=function(){var e=Object(u.useOktaAuth)(),t=e.authState,n=e.authService,c=Object(a.useContext)(b).user,o=Object(a.useContext)(f).setUser;return Object(a.useEffect)((function(){(function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getUser();case 2:t=e.sent,o(t),console.log("Auth",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,n]),c?r.a.createElement("div",{className:"d-flex",id:"wrapper"},r.a.createElement(C,null),r.a.createElement("div",{id:"view-wrapper"},r.a.createElement(S,null),r.a.createElement(T,null))):r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))},R={clientId:"0oan5whnnp1mRfl534x6",issuer:"https://dev-812844.okta.com/oauth2/default",redirectUri:"https://bklim14.github.io/react-base/callback",scopes:["openid","profile","email"],pkce:!0},U=n(109),A=(n(277),function(){return Object(a.useEffect)((function(){var e=R,t=e.pkce,n=e.issuer,a=e.clientId,r=e.redirectUri,c=e.scopes;new U({baseUrl:n.split("/oauth2")[0],clientId:a,redirectUri:r,authParams:{pkce:t,issuer:n,display:"page",responseMode:t?"query":"fragment",scopes:c}}).renderEl({el:"#sign-in-widget"},(function(){}),(function(e){throw e}))}),[]),r.a.createElement("div",null,r.a.createElement("div",{id:"sign-in-widget"}))}),I=function(){var e=Object(s.k)();return r.a.createElement(u.Security,Object.assign({},R,{onAuthRequired:function(){e.push("/login")}}),r.a.createElement(s.g,null,r.a.createElement(s.d,{path:"/login",component:A}),r.a.createElement(s.d,{path:"/callback",component:u.LoginCallback}),r.a.createElement(h,null,r.a.createElement(u.SecureRoute,{path:"/",component:P}))))},L=function(){return r.a.createElement(l.BrowserRouter,{basename:"/react-base"},r.a.createElement(I,null))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root"))}},[[112,1,2]]]);
//# sourceMappingURL=main.1e2f4146.chunk.js.map