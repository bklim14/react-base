{"version":3,"sources":["state/userContext.js","views/Dashboard.js","views/Form.js","views/Profile.js","services/menuService.js","services/service.js","components/Sidebar.js","components/Navbar.js","components/Content.js","layouts/DefaultLayout.js","authConfig.js","components/Login.js","App.js","index.js"],"names":["UserContext","createContext","UserDispatchContext","UserProvider","children","useState","routes","setRoutes","user","setUser","Provider","value","Dashboard","Form","Profile","MenuService","path","name","component","link","handleError","error","response","status","redirectTo","document","Promise","reject","location","service","axios","create","interceptors","use","this","handleSuccess","callback","get","then","data","payload","request","method","url","responseType","React","memo","menuService","useContext","console","log","useEffect","a","getMenu","fetchData","className","id","map","route","i","key","to","Navbar","authService","useOktaAuth","onClick","getElementById","classList","toggle","type","data-toggle","data-target","aria-controls","aria-expanded","aria-label","href","role","aria-haspopup","given_name","aria-labelledby","logout","Content","from","DefaultLayout","authState","getUser","userInfo","initUserInfo","clientId","issuer","redirectUri","scopes","pkce","Login","config","OktaSignIn","baseUrl","split","authParams","display","responseMode","renderEl","el","err","HasAccessToRouter","history","useHistory","onAuthRequired","push","LoginCallback","App","basename","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.34e8e973.chunk.js","sourcesContent":["import React, { createContext, useState } from 'react';\n\nconst UserContext = createContext();\nconst UserDispatchContext = createContext();\n\nconst UserProvider = ({children}) => {\n  const [routes, setRoutes] = useState([]);\n  const [user, setUser] = useState(null);\n\n  return (\n    <UserContext.Provider value={{user,routes}}>\n      <UserDispatchContext.Provider value={{setUser,setRoutes}}>\n        {children}\n      </UserDispatchContext.Provider>\n    </UserContext.Provider>\n  );\n}\n\nexport { UserProvider, UserContext, UserDispatchContext}\n","import React from 'react';\n\nconst Dashboard = () => {\n  return <div >Dashboard Works!</div>;\n}\n\nexport default Dashboard;\n","import React from 'react';\n\nconst Form = () =>  {\n  return <div >Form Works!</div>;\n}\n\nexport default Form;\n","import React from 'react';\n\nconst Profile = () => {\n  return <div >Profile Works!</div>;\n}\n\nexport default Profile;\n","import Service from \"./service\";\nimport Dashboard from \"../views/Dashboard\";\nimport Form from \"../views/Form\";\nimport Profile from \"../views/Profile\";\n\nclass MenuService extends Service {\n  getMenu() {\n    return [\n      { path: '/home', name: 'Dashboard', component: Dashboard, link: true },\n      { path: '/form', name: 'Form', component: Form, link: true},\n      { path: '/profile', name: 'Profile', component: Profile, link: true},\n    ]\n  }\n}\n\nexport default MenuService\n","import axios from 'axios';\n\nclass Service {\n  constructor() {\n    let service = axios.create({\n      //base url\n      //headers\n    });\n    service.interceptors.response.use(this.handleSuccess, this.handleError);\n    this.service = service;\n  }\n\n  handleSuccess(response) {\n    return response;\n  }\n\n  handleError = (error) => {\n    switch (error.response.status) {\n      case 401:\n        this.redirectTo(document, '/')\n        break;\n      case 404:\n        this.redirectTo(document, '/404')\n        break;\n      default:\n        this.redirectTo(document, '/500')\n        break;\n    }\n    return Promise.reject(error)\n  }\n\n  redirectTo = (document, path) => {\n    document.location = path\n  }\n\n  get(path, callback) {\n    return this.service.get(path).then(\n      (response) => callback(response.status, response.data)\n    );\n  }\n\n  patch(path, payload, callback) {\n    return this.service.request({\n      method: 'PATCH',\n      url: path,\n      responseType: 'json',\n      data: payload\n    }).then((response) => callback(response.status, response.data));\n  }\n\n  post(path, payload, callback) {\n    return this.service.request({\n      method: 'POST',\n      url: path,\n      responseType: 'json',\n      data: payload\n    }).then((response) => callback(response.status, response.data));\n  }\n}\n\nexport default Service;\n","import React, {useContext, useEffect} from 'react';\nimport { Link } from 'react-router-dom';\nimport {UserContext, UserDispatchContext} from \"../state/userContext\";\nimport MenuService from \"../services/menuService\";\n\nconst Sidebar = () => {\n  const menuService = new MenuService();\n  const { routes } = useContext(UserContext)\n  const { setRoutes } = useContext(UserDispatchContext)\n  console.log('here')\n  useEffect(() => {\n    const fetchData = async () => {\n      const routes = await menuService.getMenu();\n      setRoutes(routes);\n    }\n    fetchData();\n    console.log('service call')\n  },[]);\n\n  return (\n    <div className=\"bg-light border-right\" id=\"sidebar-wrapper\">\n      <div className=\"sidebar-heading\">React Base</div>\n      <div className=\"list-group list-group-flush\">\n        { routes.map( (route, i) => {\n          return route.link && (\n            <Link\n              key={i}\n              to={route.path}\n              className=\"list-group-item list-group-item-action bg-light\"\n            >{route.name}</Link>\n          )\n        })}\n      </div>\n    </div>\n  );\n}\n\nexport default  React.memo(Sidebar);\n","import React, {useContext} from 'react';\nimport { useOktaAuth } from '@okta/okta-react';\nimport {UserContext} from \"../state/userContext\";\n\nconst Navbar = () => {\n  const { authService } = useOktaAuth();\n  const { user } = useContext(UserContext);\n\n  const logout = () => {\n    authService.logout('/react-base');\n  };\n\n  const toggleSidebar = () => document.getElementById('wrapper')\n    .classList.toggle('toggled');\n\n  return (\n    <nav className=\"navbar navbar-expand-lg navbar-light bg-light border-bottom\">\n      <button className=\"btn btn-primary\" id=\"menu-toggle\" onClick={toggleSidebar}>Sidebar</button>\n\n      <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\"\n              aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n        <span className=\"navbar-toggler-icon\"></span>\n      </button>\n      <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n        <ul className=\"navbar-nav ml-auto mt-2 mt-lg-0\">\n          <li className=\"nav-item dropdown\">\n            <a className=\"nav-link dropdown-toggle\" href=\"#\" id=\"navbarDropdown\" role=\"button\" data-toggle=\"dropdown\"\n               aria-haspopup=\"true\" aria-expanded=\"false\">\n              Hi {user.given_name}!\n            </a>\n            <div className=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"navbarDropdown\">\n              <button className=\"dropdown-item\" onClick={logout}>Logout</button>\n            </div>\n          </li>\n        </ul>\n      </div>\n    </nav>\n  );\n}\n\nexport default Navbar;\n","import React, {useContext} from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport {UserContext} from \"../state/userContext\";\n\nconst Content = () => {\n  const { routes } = useContext(UserContext)\n  return (\n    <div className=\"container\">\n      <Switch>\n        { routes.map( (route, i) => {\n          return (\n            <Route\n              key={i}\n              path={route.path}\n              name={route.name}\n              component={route.component}\n            />\n          )\n        })}\n        <Redirect from=\"/\" to=\"/home\" />\n      </Switch>\n    </div>\n  );\n}\n\nexport default Content;\n","import '../css/default.css'\nimport React, {useEffect, useContext} from 'react';\nimport Sidebar from \"../components/Sidebar\";\nimport Navbar from \"../components/Navbar\";\nimport Content from \"../components/Content\";\nimport { useOktaAuth } from '@okta/okta-react';\nimport {UserContext, UserDispatchContext} from \"../state/userContext\";\n\nconst DefaultLayout = () => {\n  const { authState, authService } = useOktaAuth();\n  const { user } = useContext(UserContext);\n  const { setUser } = useContext(UserDispatchContext);\n\n  useEffect(() => {\n    const initUserInfo = async () => {\n      const userInfo = await authService.getUser();\n      setUser(userInfo);\n      console.log(\"Auth\", userInfo)\n    }\n    initUserInfo();\n  }, [authState, authService]); // Update if authState changes\n\n  if(!user) {\n    return (\n      <div className=\"d-flex justify-content-center\">\n        <div className=\"spinner-border\" role=\"status\">\n          <span className=\"sr-only\">Loading...</span>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"d-flex\" id=\"wrapper\">\n      <Sidebar />\n      <div id=\"view-wrapper\">\n        <Navbar />\n        <Content />\n      </div>\n    </div>\n  );\n}\n\nexport default DefaultLayout;\n","export default {\n  oidc: {\n    clientId: '0oan5whnnp1mRfl534x6',\n    issuer: 'https://dev-812844.okta.com/oauth2/default',\n    redirectUri: 'https://bklim14.github.io/react-base/callback',\n    scopes: ['openid', 'profile', 'email'],\n    pkce: true\n  }\n}\n","import React, { useEffect } from \"react\";\nimport * as OktaSignIn from \"@okta/okta-signin-widget\";\nimport \"@okta/okta-signin-widget/dist/css/okta-sign-in.min.css\";\n\nimport config from \"../authConfig\";\n\nconst Login = () => {\n  useEffect(() => {\n    const { pkce, issuer, clientId, redirectUri, scopes } = config.oidc;\n    const widget = new OktaSignIn({\n      /**\n       * Note: when using the Sign-In Widget for an OIDC flow, it still\n       * needs to be configured with the base URL for your Okta Org. Here\n       * we derive it from the given issuer for convenience.\n       */\n      baseUrl: issuer.split('/oauth2')[0],\n      clientId,\n      redirectUri,\n      authParams: {\n        pkce,\n        issuer,\n        display: 'page',\n        responseMode: pkce ? 'query' : 'fragment',\n        scopes,\n      },\n    });\n\n    widget.renderEl(\n      { el: '#sign-in-widget' },\n      () => {\n        /**\n         * In this flow, the success handler will not be called beacuse we redirect\n         * to the Okta org for the authentication workflow.\n         */\n      },\n      (err) => {\n        throw err;\n      },\n    );\n  }, []);\n\n  return (\n    <div>\n      <div id=\"sign-in-widget\" />\n    </div>\n  );\n};\n\nexport default Login;\n","import React from 'react';\nimport { BrowserRouter as Router, Route, Switch, useHistory} from 'react-router-dom';\nimport { Security, SecureRoute, LoginCallback } from \"@okta/okta-react\";\nimport './App.css';\nimport DefaultLayout from \"./layouts/DefaultLayout\";\nimport config from \"./authConfig\";\nimport Login from \"./components/Login\";\nimport {UserProvider} from \"./state/userContext\";\n\nconst HasAccessToRouter = () => {\n\n  const history = useHistory();\n\n  const customAuthHandler = () => {\n    history.push(\"/login\");\n  }\n\n  return (\n    <Security {...config.oidc} onAuthRequired={customAuthHandler}>\n      <Switch>\n        <Route path=\"/login\" component={Login} />\n        <Route path=\"/callback\" component={LoginCallback} />\n        <UserProvider>\n          <SecureRoute path=\"/\" component={DefaultLayout}/>\n        </UserProvider>\n      </Switch>\n    </Security>\n  );\n}\n\nconst App = () => (\n  <Router basename=\"/react-base\">\n    <HasAccessToRouter />\n  </Router>\n)\n\nexport default App;\n","import 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}